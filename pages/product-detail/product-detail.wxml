<import src='/components/iPhoneX-line/iPhoneX-line.wxml'/>

<!-- 消息显示模板 -->
<import src= "/components/msg-tips/msg-tips.wxml"/>

<scroll-view class="bigWrap" scroll-y="true" scroll-top="{{scrollTop}}"   bindscroll="scroll" style="height:100%">
  <view class='prduct-detail-view'>
    <!--topbar  -->
    <view class='topbar flexR' wx:if='{{floorstatus}}' >
      <image src='{{productInfo.imgUrl}}' ></image>
      <view class='msg-view fr' bindtap='msgClicked'></view>
      <template is="msg-tips" data="{{msgShow}}" /> 
    </view>
    <swiper-product imgUrls='{{imgUrls}}' msgShow='{{msgShow}}'/>
    <view wx:if='{{proNavData}}' catchtap='goPage'>
      <product-promotion-info 
      id="promotion"
      bind:countdown="timeout" 
      prop="{{proNavData}}"
      promotionBg="{{'comming'}}" 
      promotionDesc="{{promotionDesc}}"
      from="normal"
      promotionType="{{activityType}}" />
    </view>
    <!-- 产品信息 -->
    <view class='prd-info boxSize'>
      <view class='prd-name ellipsis-2'>{{productInfo.name}}</view>
      <view class='price'>
        <text class='price1 red'>¥ {{productInfoList.price}}<text class='font-24'>起</text></text>
        <text class='price2 gray'>¥ {{productInfoList.originalPrice}}</text>
        <text class='label-pd redBg'>{{productInfoList.priceLable}}</text>
      </view>
      <view class='shippingInfo gray'>
        <text style='margin-right:158rpx'>快递：{{productInfoList.freight || '包邮'}}</text> 
        <text>月销售{{productInfoList.monthSaleTotal}}笔</text>
      </view>
    </view>
    <!--产品规格选择  -->
    <view class='chooseBox'>
      <!-- <view> -->
        <product-specification id='prd-info-type' 
            bind:subClicked="typeSubClicked"  
            productSpec='{{productSpec}}' 
            price = '{{productInfoList.price}}'
            priceList='{{priceList}}' 
            bind:counterInputOnChange='counterInputOnChange' 
            imgUrl="{{productInfo.imgUrl}}" 
            showImgs='{{true}}'
            isInit="{{false}}" 
            bind:hiddenTips='hiddenTips'
            isIphoneX='{{isIPhoneX.isIPhoneX}}'
            commodityType = '{{activityType}}'
        >
        <!-- <view class='cell-name'>规格</view>
        <view class='cell-content'>{{selectType.productType? selectType.productType:'选择产品规格'}}</view> -->
        </product-specification >
      <!-- </view> -->
      <view class='gray'>
        <text class='label red' >服务</text>
        正品保障·急速发货 <text wx:if='{{productInfo.afterSaleServiceDays>0}}'>{{productInfo.afterSaleServiceDays>30? 30:productInfo.afterSaleServiceDays}}天无理由退换货</text>
        <text wx:else>无售后服务</text>
      </view>
    </view>

     <!--产品图文详情切换  -->
    <product-infos article='{{article}}' nodes='{{nodes}}'/>
   
    <!-- 详情页 tabar  -->
    <view class="bottom-bar flexR boxSize {{isIPhoneX.className}}" wx:if='{{productInfoList.onSale}}'>
      <view class='cart font-22 flexC' bindtap='cartClicked'>
        <image src='/img/shoppingcart.png' mode='widthFix'></image>
        <view class='gray'>购物车</view>
        <view class='num-label redBg flexR' wx:if='{{size>0}}'>{{size}}</view>
      </view>
      <view class='buy-btn font-28 flexR' bindtap='btnClicked'data-key='2'>
        立即购买
      </view>
      <view class='add-cart font-28 flexR redBg' bindtap='btnClicked' data-key='1'>
        加入购物车
      </view>
    </view>
    <view wx:if='{{!productInfoList.onSale}}' class="bottom-bar flexR boxSize {{isIPhoneX.className}} no-sale">此商品已下架</view>
    <!--置顶的按钮-->
    <view class='goTop' bindtap='goTop' wx:if='{{floorstatus}}'>
      <image src='/img/top-icon.png' mode='widthFix'></image>
    </view>
  </view>
  

</scroll-view>


<!--适配iPhone X  -->
<template wx:if='{{isIPhoneX.isIPhoneX}}' is="iPhoneX-line" />

<red-envelopes  id='redEnvelopes' door='2'/>